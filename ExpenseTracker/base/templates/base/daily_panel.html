{% extends 'base/daily_layout.html' %}

{% block custom-script %}
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
<script>
  $(document).ready(() => {
    $('#change-date').click(() => {
      let dateForm = document.querySelector('#date-form');
      let dateTitle = document.querySelector('#date-title');
      if (dateForm.style.display === 'none') {
        dateForm.style.display = 'inline';
        dateTitle.style.display = 'none';
      }
      else {
        dateForm.style.display = 'none';
        dateTitle.style.display = 'inline';
      }
    });
    $('#date-input').change(() => {
      $('#date-form').submit();
    });
  });
  
</script>

{% endblock %}

<!-- <script>
  let item = document.querySelector("#toggle");
  item.addEventListener("click", myFunction);

  function myFunction() {
    piechart = document.getElementById('piechart');
    barchart = document.getElementById('barchart');
    
    if (piechart.style.display === 'none') {
      piechart.style.display = 'block';
      barchart.style.display = 'none';
    }
    else {
      piechart.style.display = 'none';
      barchart.style.display = 'block';
    }
    
    };
  
</script> -->



{% block container-header %}
<a href="{% url 'daily-panel' %}?date={{yst_date}}" style="display: inline">YST</a>
<a href="{% url 'daily-panel' %}?date={{tmr_date}}" style="display: inline">TMR</a>
<h3 style="display: inline">Daily Panel</h3>
<h2 id="date-title" style="display: inline">{{month_name}} {{day}}, {{year}}</h2>
<form action="{% url 'daily-panel' %}" method="GET" id="date-form" style="display: none">
  <div class="form-group">
    <div class="col-xs-4" style="display: inline">
      <input type="date" name="date" class="form-control form-rounded" id="date-input">
    </div>
    
  </div>
</form>
<span id="change-date" class="material-symbols-outlined" style="display: inline">edit</span>



{% endblock %}

{% block expense-table %}
<h4>Expenses of the Day</h4>
<table class="table table-sm table-bordered table-striped table-hover">
    <thead>
      <tr>
        <th scope="col">Category</th>
        <th scope="col">Cost</th>
        <th scope="col">Date</th>
        <th scope="col">Description</th>
      </tr>
    </thead>
    <tbody>
        {% for expense in limited_expenses %}
        <tr>
            <td>{{expense.category}}</td>
            <td>{{expense.cost}}</td>
            <td>{{expense.date|date:"M-d"|slice:"0:"}}</td>
            <td>{{expense.description}}...</td>
        </tr>
        {% endfor %}
    </tbody>
  </table>
  <a href="{% url 'expense-list' %}?year={{year}}&month={{month}}&day={{day}}">View More</a>

{% endblock %}


{% block spending %}
<h4>Spending</h4>
<h4>Today's Spending: {{day_expenditure}}</h4>
{% endblock %}

{% block add-expense %}
<a href="{% url 'expense-create' %}" class="open-incident btn btn-info" data-popup-url="{% url 'expense-create' %}">ADD Expense</a>
{% endblock %}

{% block subscription-table %}
<h4>Active Subscriptions</h4>
  {% for subscription in active_subscriptions %}
  <h4>{{subscription.category}} {{subscription.cost}}</h4>
  {% endfor %}
{% endblock %}

{% block b3 %}
<h4>Average Spending per Day: {{expenditure_per_day}}</h4>
{% endblock %}


